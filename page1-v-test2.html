<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le Juste Prix</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Poppins:wght@300;400;600;700;800&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --accent: #f093fb;
            --success: #06ffa5;
            --warning: #ffbe0b;
            --danger: #ff006e;
            --dark: #1a1a2e;
            --light: #f8f9fa;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(102, 126, 234, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(118, 75, 162, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(240, 147, 251, 0.2) 0%, transparent 50%);
            animation: bgShift 15s ease-in-out infinite;
            z-index: 0;
        }

        @keyframes bgShift {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.1); }
        }

        .container {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 40px;
            box-shadow: 
                0 30px 90px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.2) inset;
            max-width: 1100px;
            width: 100%;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        /* Header avec effet n√©on */
        h1 {
            font-family: 'Press Start 2P', cursive;
            background: linear-gradient(135deg, var(--primary), var(--secondary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.5em;
            text-shadow: 0 0 30px rgba(102, 126, 234, 0.5);
            animation: titleGlow 3s ease-in-out infinite;
            letter-spacing: 2px;
        }

        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        /* Stats du joueur modernis√©es */
        .player-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-box {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .stat-box::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .stat-box:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }

        .stat-value {
            font-family: 'Press Start 2P', cursive;
            font-size: 2.2em;
            display: block;
            margin-bottom: 10px;
            position: relative;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.95;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .xp-progress {
            margin-top: 10px;
            font-size: 0.85em;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        /* √âcran de d√©marrage am√©lior√© */
        #startScreen h2 {
            color: var(--dark);
            margin-bottom: 35px;
            font-size: 1.9em;
            font-weight: 800;
            text-align: center;
            position: relative;
        }

        #startScreen h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 2px;
        }

        .category-selection h3 {
            color: var(--dark);
            margin-bottom: 25px;
            font-size: 1.4em;
            font-weight: 700;
            text-align: center;
        }

        /* Grille de cat√©gories modernis√©e */
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .category-card {
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border: 3px solid transparent;
            border-radius: 20px;
            padding: 25px 20px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 0;
        }

        .category-card > * {
            position: relative;
            z-index: 1;
        }

        .category-card:hover:not(.locked) {
            transform: translateY(-8px) scale(1.02);
            border-color: var(--primary);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.3);
        }

        .category-card.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-color: var(--accent);
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }

        .category-card.active::before {
            opacity: 1;
        }

        .category-card.locked {
            opacity: 0.6;
            cursor: not-allowed;
            background: linear-gradient(135deg, #e9ecef, #f8f9fa);
        }

        .category-checkbox {
            position: absolute;
            top: 15px;
            left: 15px;
            width: 22px;
            height: 22px;
            cursor: pointer;
            accent-color: var(--accent);
        }

        .category-icon {
            font-size: 3em;
            margin-bottom: 15px;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
        }

        .category-name {
            font-weight: 700;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .category-unlock {
            font-size: 0.85em;
            opacity: 0.8;
        }

        .lock-icon {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8em;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
        }

        .unlock-btn {
            background: linear-gradient(135deg, var(--success), #04d98b);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            margin-top: 12px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(6, 255, 165, 0.3);
        }

        .unlock-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(6, 255, 165, 0.4);
        }

        .unlock-btn:disabled {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .product-count {
            font-size: 0.85em;
            margin-top: 8px;
            padding: 5px 12px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            display: inline-block;
        }

        .category-card.active .product-count {
            background: rgba(255, 255, 255, 0.3);
        }

        /* S√©lecteur de mode am√©lior√© */
        .mode-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .mode-card {
            background: linear-gradient(135deg, #f8f9fa, #ffffff);
            border: 3px solid transparent;
            border-radius: 25px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }

        .mode-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .mode-card > * {
            position: relative;
            z-index: 1;
        }

        .mode-card:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: var(--primary);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.3);
        }

        .mode-card.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-color: var(--accent);
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }

        .mode-card.active::before {
            opacity: 1;
        }

        .mode-icon {
            font-size: 3.5em;
            margin-bottom: 15px;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.1));
        }

        .mode-title {
            font-family: 'Press Start 2P', cursive;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .mode-details {
            font-size: 0.95em;
            line-height: 1.8;
            opacity: 0.9;
        }

        /* Bouton de d√©marrage premium */
        .start-btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 20px 60px;
            font-size: 1.4em;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 0 auto;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            position: relative;
            overflow: hidden;
        }

        .start-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .start-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);
        }

        .start-btn:active {
            transform: translateY(-1px);
        }

        .start-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Zone de jeu am√©lior√©e */
        #gameArea {
            display: none;
            text-align: center;
        }

        .mode-badge {
            display: inline-block;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 0.95em;
            font-weight: 700;
            margin-bottom: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .mode-badge.normal {
            background: linear-gradient(135deg, var(--success), #04d98b);
            color: white;
        }

        .mode-badge.expert {
            background: linear-gradient(135deg, var(--danger), #f5576c);
            color: white;
        }

        /* Image produit avec effet */
        .product-image {
            width: 100%;
            max-width: 400px;
            height: 400px;
            object-fit: cover;
            border-radius: 25px;
            margin: 0 auto 25px;
            display: block;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            border: 5px solid white;
        }

        .product-image:hover {
            transform: scale(1.02);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25);
        }

        .product-name {
            font-size: 1.8em;
            color: var(--dark);
            margin-bottom: 15px;
            font-weight: 800;
            text-align: center;
        }

        .product-link {
            display: none;
            position: absolute;
            top: 20px;
            left: 20px;
            color: var(--primary);
            text-decoration: none;
            font-size: 0.95em;
            font-weight: 600;
            transition: all 0.3s;
            padding: 12px 25px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid var(--primary);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        .product-link.show {
            display: inline-block;
        }

        .product-link:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        /* Timer premium avec animation */
        .timer {
            font-family: 'Press Start 2P', cursive;
            font-size: 2.5em;
            background: linear-gradient(135deg, var(--danger), #f5576c);
            color: white;
            padding: 20px 40px;
            border-radius: 25px;
            display: inline-block;
            min-width: 200px;
            margin: 0 auto 25px;
            box-shadow: 0 10px 30px rgba(255, 0, 110, 0.3);
            position: relative;
            overflow: hidden;
        }

        .timer::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .timer:hover::before {
            left: 100%;
        }

        .timer.warning {
            animation: timerPulse 0.8s infinite;
        }

        @keyframes timerPulse {
            0%, 100% { 
                transform: scale(1); 
                box-shadow: 0 10px 30px rgba(255, 0, 110, 0.3);
            }
            50% { 
                transform: scale(1.05); 
                box-shadow: 0 15px 40px rgba(255, 0, 110, 0.5);
            }
        }

        /* Input am√©lior√© */
        .input-group {
            margin-bottom: 25px;
        }

        input[type="number"] {
            width: 100%;
            max-width: 500px;
            padding: 20px 30px;
            font-size: 1.4em;
            font-weight: 600;
            border: 3px solid var(--primary);
            border-radius: 20px;
            text-align: center;
            outline: none;
            transition: all 0.3s;
            background: white;
            display: block;
            margin: 0 auto;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.2);
        }

        input[type="number"]:focus {
            border-color: var(--secondary);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            transform: translateY(-2px);
        }

        /* Boutons am√©lior√©s */
        button:not(.unlock-btn):not(.start-btn) {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 18px 45px;
            font-size: 1.2em;
            font-weight: 700;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 8px;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }

        button:not(.unlock-btn):not(.start-btn)::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        button:not(.unlock-btn):not(.start-btn):hover::before {
            width: 300px;
            height: 300px;
        }

        button:not(.unlock-btn):not(.start-btn):hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.4);
        }

        button:not(.unlock-btn):not(.start-btn):active {
            transform: translateY(-1px);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Feedback am√©lior√© */
        .feedback {
            margin-top: 25px;
            padding: 20px 30px;
            border-radius: 20px;
            font-size: 1.3em;
            font-weight: 700;
            display: none;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            animation: feedbackSlide 0.4s ease;
        }

        @keyframes feedbackSlide {
            from { 
                opacity: 0; 
                transform: translateY(-20px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }

        .feedback.show {
            display: block;
        }

        .feedback.higher {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            color: #856404;
            border: 3px solid #ffd93d;
        }

        .feedback.lower {
            background: linear-gradient(135deg, #d1ecf1, #74b9ff);
            color: #0c5460;
            border: 3px solid #00b4d8;
        }

        .feedback.win {
            background: linear-gradient(135deg, var(--success), #04d98b);
            color: white;
            font-size: 1.6em;
            border: 3px solid #00ff9f;
        }

        .feedback.lose {
            background: linear-gradient(135deg, var(--danger), #f5576c);
            color: white;
            border: 3px solid #ff1744;
        }

        .attempts {
            margin-top: 20px;
            color: var(--dark);
            font-size: 1.2em;
            font-weight: 600;
            text-align: center;
        }

        .real-price {
            margin: 20px 0;
            font-size: 1.5em;
            color: var(--danger);
            font-weight: 800;
            text-align: center;
        }

        .reward-display {
            background: linear-gradient(135deg, var(--accent), #f5576c);
            color: white;
            padding: 20px 30px;
            border-radius: 20px;
            margin: 20px auto;
            font-size: 1.3em;
            font-weight: 700;
            box-shadow: 0 10px 30px rgba(240, 147, 251, 0.4);
            max-width: 400px;
            text-align: center;
        }

        .game-over {
            display: none;
            text-align: center;
        }

        .game-over.show {
            display: block;
            animation: fadeInUp 0.5s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .disclaimer {
            margin-top: 40px;
            font-size: 0.85em;
            color: #999;
            text-align: center;
            font-style: italic;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 25px;
            }

            h1 {
                font-size: 1.5em;
            }

            .stat-value {
                font-size: 1.8em;
            }

            .mode-icon {
                font-size: 2.5em;
            }

            .product-image {
                max-width: 100%;
                height: 300px;
            }

            .timer {
                font-size: 1.8em;
                padding: 15px 30px;
            }

            input[type="number"] {
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ LE JUSTE PRIX</h1>
        
        <div class="player-stats">
            <div class="stat-box">
                <span class="stat-value" id="playerLevel">1</span>
                <span class="stat-label">üìä Niveau</span>
                <span class="xp-progress" id="xpProgress">0/50 XP</span>
            </div>
            <div class="stat-box">
                <span class="stat-value" id="playerMoney">0‚Ç¨</span>
                <span class="stat-label">üí∞ Argent</span>
            </div>
            <div class="stat-box">
                <span class="stat-value" id="playerWins">0</span>
                <span class="stat-label">üèÜ Victoires</span>
            </div>
        </div>

        <div id="startScreen">
            <div class="category-selection">
                <h3>Choisissez une ou plusieurs cat√©gories</h3>
                <div class="categories-grid" id="categoriesGrid"></div>
            </div>

            <h2>Choisissez votre mode de jeu</h2>
            <div class="mode-selector">
                <div class="mode-card active" onclick="selectMode('normal')">
                    <div class="mode-icon">üü¢</div>
                    <div class="mode-title">NORMAL</div>
                    <div class="mode-details">
                        ‚è±Ô∏è 1 minute<br>
                        üí∂ Prix arrondis<br>
                        üí∞ +500‚Ç¨ victoire<br>
                        üòä Facile
                    </div>
                </div>
                <div class="mode-card" onclick="selectMode('expert')">
                    <div class="mode-icon">üî¥</div>
                    <div class="mode-title">EXPERT</div>
                    <div class="mode-details">
                        ‚è±Ô∏è 30 secondes<br>
                        üí∂ Centimes inclus<br>
                        üí∞ +1500‚Ç¨ victoire<br>
                        üò∞ Difficile
                    </div>
                </div>
            </div>

            <button class="start-btn" onclick="startGameWithMode()" id="startGameBtn">
                <span style="position: relative; z-index: 1;">üéÆ Commencer la partie</span>
            </button>
        </div>

        <div id="gameArea">
            <div class="mode-badge" id="modeBadge"></div>
            <img id="productImage" class="product-image" src="" alt="Produit">
            <div id="productName" class="product-name"></div>
            <a id="productLink" class="product-link" href="#" target="_blank">üîó Voir la source</a>
            
            <div class="timer" id="timer">01:00</div>
            
            <div class="input-group">
                <input type="number" id="priceInput" placeholder="Entrez votre prix en ‚Ç¨" min="0" step="0.01">
            </div>
            
            <button id="submitBtn" onclick="submitGuess()">
                <span style="position: relative; z-index: 1;">Proposer</span>
            </button>
            
            <div class="attempts" id="attempts">Tentatives: 0</div>
            <div id="feedback" class="feedback"></div>
            
            <div id="gameOver" class="game-over">
                <div class="real-price" id="realPrice"></div>
                <div class="reward-display" id="rewardDisplay"></div>
                <button onclick="newGame()">
                    <span style="position: relative; z-index: 1;">üîÑ Rejouer (m√™me mode)</span>
                </button>
                <button onclick="backToMenu()">
                    <span style="position: relative; z-index: 1;">üè† Retour au menu</span>
                </button>
            </div>
        </div>

        <div class="disclaimer">
            * Les prix indiqu√©s sont bas√©s sur des estimations et peuvent ne pas refl√©ter les tarifs actuels.
        </div>
    </div>

    <script>
        // Le JavaScript reste identique √† votre code original
        let playerData = {
            level: 1,
            money: 0,
            wins: 0,
            xp: 0,
            xpToNextLevel: 50,
            unlockedCategories: ['√âlectronique de base']
        };
        
        if (localStorage.getItem('playerData')) {
            playerData = JSON.parse(localStorage.getItem('playerData'));
        }

        const categories = [
            { name: '√âlectronique de base', icon: 'üì±', unlockCost: 0, unlockLevel: 1 },
            { name: 'Gaming', icon: 'üéÆ', unlockCost: 2000, unlockLevel: 2 },
            { name: 'Audio Premium', icon: 'üéß', unlockCost: 4000, unlockLevel: 3 },
            { name: 'Mode & Sneakers', icon: 'üëü', unlockCost: 1500, unlockLevel: 2 },
            { name: 'Montres connect√©es', icon: '‚åö', unlockCost: 3000, unlockLevel: 3 },
            { name: 'Ordinateurs', icon: 'üíª', unlockCost: 5000, unlockLevel: 4 },
            { name: 'Photo & Vid√©o', icon: 'üì∑', unlockCost: 8000, unlockLevel: 5 },
            { name: 'Maison connect√©e', icon: 'üè†', unlockCost: 3500, unlockLevel: 3 },
            { name: 'Premium', icon: 'üíé', unlockCost: 15000, unlockLevel: 6 },
            { name: '√âquipements de Fitness', icon: 'üèãÔ∏è‚Äç‚ôÇÔ∏è', unlockCost: 2500, unlockLevel: 2 },
            { name: 'Cuisine High-Tech', icon: 'üç≥', unlockCost: 3000, unlockLevel: 3 },
            { name: 'Instruments de musique', icon: 'üé∏', unlockCost: 3500, unlockLevel: 3 },
            { name: 'Objets R√©tro & Vintage', icon: 'üìº', unlockCost: 1500, unlockLevel: 2 },
            { name: 'Figurines & Collectibles', icon: 'üß∏', unlockCost: 2000, unlockLevel: 2 },
            { name: 'D√©coration Artistique', icon: 'üé®', unlockCost: 2500, unlockLevel: 2 },
            { name: 'Produits Insolites', icon: 'ü™Ñ', unlockCost: 1800, unlockLevel: 2 },
            { name: 'Luxury Fashion', icon: 'üëë', unlockCost: 20000, unlockLevel: 7 },
            { name: 'Artisanat & Fait-main', icon: 'ü™µ', unlockCost: 2000, unlockLevel: 2 }
        ];


        const productsByCategory = {
            '√âlectronique de base': [
                { name: "iPhone 15 Pro 128 Go", price: 1329.00, image: "https://images.unsplash.com/photo-1695048133142-1a20484d2569?w=400&h=400&fit=crop", link: "https://www.apple.com/fr/iphone-15-pro/", requiredLevel: 1 },
                { name: "Samsung Galaxy S24 128 Go", price: 899.00, image: "https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400&h=400&fit=crop", link: "https://www.samsung.com/fr/smartphones/galaxy-s24/", requiredLevel: 1 },
                { name: "iPad Air M2 128 Go", price: 699.00, image: "https://images.unsplash.com/photo-1585790050230-5dd28404f8db?w=400&h=400&fit=crop", link: "https://www.apple.com/fr/ipad-air/", requiredLevel: 2 },
                { name: "AirPods Pro 2√®me g√©n√©ration", price: 299.00, image: "https://images.unsplash.com/photo-1606841837239-c5a1a4a07af7?w=400&h=400&fit=crop", link: "https://www.apple.com/fr/airpods-pro/", requiredLevel: 2 },
                { name: "Google Pixel 8 Pro 256 Go", price: 1099.00, image: "https://images.unsplash.com/photo-1598327105666-5b89351aff97?w=400&h=400&fit=crop", link: "https://store.google.com/product/pixel_8_pro", requiredLevel: 3 },
                { name: "Samsung Galaxy Tab S9 256 Go", price: 999.00, image: "https://images.unsplash.com/photo-1561154464-82e9adf32764?w=400&h=400&fit=crop", link: "https://www.samsung.com/fr/tablets/galaxy-tab-s9/", requiredLevel: 3 },
                { name: "Xiaomi 13T Pro 512 Go", price: 649.00, image: "https://images.unsplash.com/photo-1574944985070-8f3ebc6b79d2?w=400&h=400&fit=crop", link: "https://www.mi.com/fr/product/xiaomi-13t-pro/", requiredLevel: 4 },
                { name: "OnePlus 11 256 Go", price: 799.00, image: "https://images.unsplash.com/photo-1567581935884-3349723552ca?w=400&h=400&fit=crop", link: "https://www.oneplus.com/fr/11", requiredLevel: 4 },
                { name: "Nothing Phone (2) 256 Go", price: 699.00, image: "https://images.unsplash.com/photo-1592286927505-b165b2e6b0c7?w=400&h=400&fit=crop", link: "https://eu.nothing.tech/products/phone-2", requiredLevel: 5 },
                { name: "Motorola Edge 40 Pro", price: 899.00, image: "https://images.unsplash.com/photo-1601784551446-20c9e07cdbdb?w=400&h=400&fit=crop", link: "https://www.motorola.fr/smartphones-motorola-edge-40-pro/", requiredLevel: 6 }
            ],
            'Gaming': [
                { name: "PlayStation 5 (Disque)", price: 549.99, image: "https://images.unsplash.com/photo-1606813907291-d86efa9b94db?w=400&h=400&fit=crop", link: "https://www.playstation.com/fr-fr/ps5/", requiredLevel: 1 },
                { name: "Nintendo Switch OLED", price: 349.99, image: "https://images.unsplash.com/photo-1578303512597-81e6cc155b3e?w=400&h=400&fit=crop", link: "https://www.nintendo.com/fr-fr/Nintendo-Switch/Nintendo-Switch-OLED/", requiredLevel: 1 },
                { name: "Xbox Series X", price: 549.99, image: "https://images.unsplash.com/photo-1621259182978-fbf93132d53d?w=400&h=400&fit=crop", link: "https://www.xbox.com/fr-FR/consoles/xbox-series-x", requiredLevel: 2 },
                { name: "Razer DeathAdder V3 Pro", price: 149.99, image: "https://images.unsplash.com/photo-1527864550417-7fd91fc51a46?w=400&h=400&fit=crop", link: "https://www.razer.com/gaming-mice/razer-deathadder-v3-pro", requiredLevel: 2 },
                { name: "SteelSeries Arctis Nova Pro", price: 349.99, image: "https://images.unsplash.com/photo-1599669454699-248893623440?w=400&h=400&fit=crop", link: "https://steelseries.com/gaming-headsets/arctis-nova-pro", requiredLevel: 3 },
                { name: "Corsair K70 RGB Pro", price: 179.99, image: "https://images.unsplash.com/photo-1587829741301-dc798b83add3?w=400&h=400&fit=crop", link: "https://www.corsair.com/fr/fr/k70-rgb-pro", requiredLevel: 3 },
                { name: "Logitech G Pro X Superlight", price: 159.00, image: "https://images.unsplash.com/photo-1615663245857-ac93bb7c39e7?w=400&h=400&fit=crop", link: "https://www.logitechg.com/fr-fr/products/gaming-mice/pro-x-superlight-wireless-mouse.html", requiredLevel: 4 },
                { name: "Valve Steam Deck 512 Go", price: 679.00, image: "https://images.unsplash.com/photo-1625805866449-3589fe3f71a3?w=400&h=400&fit=crop", link: "https://store.steampowered.com/steamdeck", requiredLevel: 4 },
                { name: "ASUS ROG Ally", price: 799.99, image: "https://images.unsplash.com/photo-1612287230202-1ff1d85d1bdf?w=400&h=400&fit=crop", link: "https://rog.asus.com/fr/gaming-handhelds/rog-ally/", requiredLevel: 5 },
                { name: "HyperX Cloud III Wireless", price: 189.99, image: "https://images.unsplash.com/photo-1618366712010-f4ae9c647dcb?w=400&h=400&fit=crop", link: "https://www.hyperx.com/products/hyperx-cloud-iii-wireless", requiredLevel: 6 }
            ],
            'Audio Premium': [
                { name: "Sony WH-1000XM5", price: 399.00, image: "https://images.unsplash.com/photo-1546435770-a3e426bf472b?w=400&h=400&fit=crop", link: "https://www.sony.fr/electronics/casque-arceau/wh-1000xm5", requiredLevel: 1 },
                { name: "JBL Charge 5", price: 179.99, image: "https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=400&h=400&fit=crop", link: "https://fr.jbl.com/enceintes-bluetooth/CHARGE5.html", requiredLevel: 1 },
                { name: "Bose QuietComfort Ultra", price: 429.00, image: "https://images.unsplash.com/photo-1484704849700-f032a568e944?w=400&h=400&fit=crop", link: "https://www.bose.fr/products/headphones/noise-cancelling-headphones/quietcomfort-ultra-headphones", requiredLevel: 2 },
                { name: "AirPods Max", price: 629.00, image: "https://images.unsplash.com/photo-1625498677464-43c0fb02f834?w=400&h=400&fit=crop", link: "https://www.apple.com/fr/airpods-max/", requiredLevel: 2 },
                { name: "Marshall Emberton II", price: 169.99, image: "https://images.unsplash.com/photo-1545454675-3531b543be5d?w=400&h=400&fit=crop", link: "https://www.marshallheadphones.com/fr/emberton-ii", requiredLevel: 3 },
                { name: "Samsung Galaxy Buds2 Pro", price: 229.00, image: "https://images.unsplash.com/photo-1590658268037-6bf12165a8df?w=400&h=400&fit=crop", link: "https://www.samsung.com/fr/audio-devices/galaxy-buds2-pro/", requiredLevel: 3 },
                { name: "Sennheiser Momentum 4", price: 379.00, image: "https://images.unsplash.com/photo-1613040809024-b4ef7ba99bc3?w=400&h=400&fit=crop", link: "https://www.sennheiser.com/fr-fr/momentum-4-wireless", requiredLevel: 4 },
                { name: "Bang & Olufsen Beoplay H95", price: 799.00, image: "https://images.unsplash.com/photo-1590658165737-15a047b7a03e?w=400&h=400&fit=crop", link: "https://www.bang-olufsen.com/fr/fr/speakers/beoplay-h95", requiredLevel: 4 },
                { name: "Sonos Era 300", price: 499.00, image: "https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=400&h=400&fit=crop", link: "https://www.sonos.com/fr-fr/shop/era-300", requiredLevel: 5 },
                { name: "Bowers & Wilkins PX8", price: 699.00, image: "https://images.unsplash.com/photo-1545127398-14699f92334b?w=400&h=400&fit=crop", link: "https://www.bowerswilkins.com/fr-fr/product/headphones/px8", requiredLevel: 6 }
            ],
            'Mode & Sneakers': [
                { name: "Nike Air Jordan 1 Mid", price: 139.99, image: "https://images.unsplash.com/photo-1556906781-9a412961c28c?w=400&h=400&fit=crop", link: "https://www.nike.com/fr/t/air-jordan-1-mid", requiredLevel: 1 },
                { name: "Converse Chuck Taylor All Star", price: 69.99, image: "https://images.unsplash.com/photo-1514989940723-e8e51635b782?w=400&h=400&fit=crop", link: "https://www.converse.com/fr/fr/chuck-taylor-all-star", requiredLevel: 1 },
                { name: "Nike Air Max 90", price: 149.99, image: "https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400&h=400&fit=crop", link: "https://www.nike.com/fr/t/air-max-90", requiredLevel: 2 },
                { name: "Adidas Ultraboost 22", price: 189.99, image: "https://images.unsplash.com/photo-1608231387042-66d1773070a5?w=400&h=400&fit=crop", link: "https://www.adidas.fr/ultraboost", requiredLevel: 2 },
                { name: "New Balance 574", price: 99.99, image: "https://images.unsplash.com/photo-1539185441755-769473a23570?w=400&h=400&fit=crop", link: "https://www.newbalance.fr/574", requiredLevel: 3 },
                { name: "The North Face Nuptse 1996", price: 349.00, image: "https://images.unsplash.com/photo-1544923246-77307dd654f3?w=400&h=400&fit=crop", link: "https://www.thenorthface.fr/shop/fr/tnf-fr/doudounes-nuptse", requiredLevel: 3 },
                { name: "Vans Old Skool", price: 79.99, image: "https://images.unsplash.com/photo-1525966222134-fcfa99b8ae77?w=400&h=400&fit=crop", link: "https://www.vans.fr/shop/fr/vans-fr/old-skool", requiredLevel: 4 },
                { name: "Timberland 6-Inch Premium", price: 189.99, image: "https://images.unsplash.com/photo-1520639888713-7851133b1ed0?w=400&h=400&fit=crop", link: "https://www.timberland.fr/shop/fr/tbl-fr/chaussures-homme-6-inch-premium", requiredLevel: 4 },
                { name: "Dr. Martens 1460", price: 169.00, image: "https://images.unsplash.com/photo-1543163521-1bf539c55dd2?w=400&h=400&fit=crop", link: "https://www.drmartens.com/fr/fr/1460", requiredLevel: 5 },
                { name: "Lacoste Polo Classique", price: 99.00, image: "https://images.unsplash.com/photo-1586363104862-3a5e2ab60d99?w=400&h=400&fit=crop", link: "https://www.lacoste.com/fr/", requiredLevel: 6 }
            ],
            'Montres connect√©es': [
                { name: "Apple Watch Series 9 GPS 45mm", price: 479.00, image: "https://images.unsplash.com/photo-1434493789847-2f02dc6ca35d?w=400&h=400&fit=crop", link: "https://www.apple.com/fr/apple-watch-series-9/", requiredLevel: 1 },
                { name: "Fitbit Sense 2", price: 299.00, image: "https://images.unsplash.com/photo-1575311373937-040b8e1fd5b6?w=400&h=400&fit=crop", link: "https://www.fitbit.com/global/fr/products/smartwatches/sense2", requiredLevel: 1 },
                { name: "Samsung Galaxy Watch 6 Classic", price: 429.00, image: "https://images.unsplash.com/photo-1617043786394-f977fa12eddf?w=400&h=400&fit=crop", link: "https://www.samsung.com/fr/watches/galaxy-watch/galaxy-watch6-classic/", requiredLevel: 2 },
                { name: "Garmin Forerunner 965", price: 649.00, image: "https://images.unsplash.com/photo-1579586337278-3befd40fd17a?w=400&h=400&fit=crop", link: "https://www.garmin.com/fr-FR/p/780139", requiredLevel: 2 },
                { name: "Polar Vantage V3", price: 599.00, image: "https://images.unsplash.com/photo-1508685096489-7aacd43bd3b1?w=400&h=400&fit=crop", link: "https://www.polar.com/fr-fr/products/vantage-v3", requiredLevel: 3 },
                { name: "Withings ScanWatch 2", price: 349.00, image: "https://images.unsplash.com/photo-1523395243481-163f8f6155ab?w=400&h=400&fit=crop", link: "https://www.withings.com/fr/fr/scanwatch-2", requiredLevel: 3 },
                { name: "Amazfit GTR 4", price: 229.00, image: "https://images.unsplash.com/photo-1579721840641-7d0e67f1204e?w=400&h=400&fit=crop", link: "https://www.amazfit.com/fr/products/amazfit-gtr-4", requiredLevel: 4 },
                { name: "Huawei Watch GT 4", price: 299.00, image: "https://images.unsplash.com/photo-1557438159577-51eec7a6c9e8?w=400&h=400&fit=crop", link: "https://consumer.huawei.com/fr/wearables/watch-gt4/", requiredLevel: 4 },
                { name: "Suunto 9 Peak Pro", price: 569.00, image: "https://images.unsplash.com/photo-1633460459798-23e4e62f0f4b?w=400&h=400&fit=crop", link: "https://www.suunto.com/fr-fr/Products/sports-watches/suunto-9-peak-pro/", requiredLevel: 5 },
                { name: "Apple Watch Ultra 2", price: 899.00, image: "https://images.unsplash.com/photo-1663748872025-47a5f3f06fa1?w=400&h=400&fit=crop", link: "https://www.apple.com/fr/apple-watch-ultra-2/", requiredLevel: 6 }
            ],
            'Ordinateurs': [
                { name: "MacBook Air M2 256 Go", price: 1199.00, image: "https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=400&h=400&fit=crop", link: "https://www.apple.com/fr/macbook-air-m2/", requiredLevel: 1 },
                { name: "Dell XPS 15 Intel i7 512 Go", price: 1899.00, image: "https://images.unsplash.com/photo-1593642632823-8f785ba67e45?w=400&h=400&fit=crop", link: "https://www.dell.com/fr-fr/shop/laptops/xps-15/", requiredLevel: 1 },
                { name: "HP Spectre x360 14\" i7 1 To", price: 1699.00, image: "https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=400&h=400&fit=crop", link: "https://www.hp.com/fr-fr/shop/product.aspx?id=spectre-x360", requiredLevel: 2 },
                { name: "Asus ROG Zephyrus G14 RTX 4060", price: 1899.00, image: "https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=400&h=400&fit=crop", link: "https://rog.asus.com/fr/laptops/rog-zephyrus/rog-zephyrus-g14/", requiredLevel: 2 },
                { name: "MacBook Pro 14\" M3 512 Go", price: 2249.00, image: "https://images.unsplash.com/photo-1611186871348-b1ce696e52c9?w=400&h=400&fit=crop", link: "https://www.apple.com/fr/macbook-pro-14-and-16/", requiredLevel: 3 },
                { name: "Lenovo ThinkPad X1 Carbon i7", price: 1799.00, image: "https://images.unsplash.com/photo-1588872657578-7efd1f1555ed?w=400&h=400&fit=crop", link: "https://www.lenovo.com/fr/fr/laptops/thinkpad/thinkpad-x1/x1-carbon-gen-11/", requiredLevel: 3 },
                { name: "Microsoft Surface Laptop 5", price: 1429.00, image: "https://images.unsplash.com/photo-1593642632559-0c6d3fc62b89?w=400&h=400&fit=crop", link: "https://www.microsoft.com/fr-fr/surface/devices/surface-laptop-5", requiredLevel: 4 },
                { name: "Razer Blade 15 RTX 4070", price: 2399.00, image: "https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=400&h=400&fit=crop", link: "https://www.razer.com/gaming-laptops/razer-blade-15", requiredLevel: 4 },
                { name: "Acer Predator Helios 16", price: 1999.00, image: "https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=400&h=400&fit=crop", link: "https://www.acer.com/fr-fr/predator/laptops/helios", requiredLevel: 5 },
                { name: "LG Gram 17 Intel i7", price: 1699.00, image: "https://images.unsplash.com/photo-1588872657578-7efd1f1555ed?w=400&h=400&fit=crop", link: "https://www.lg.com/fr/ordinateurs-portables/lg-gram", requiredLevel: 6 }
            ],
            'Photo & Vid√©o': [
                { name: "GoPro HERO 12 Black", price: 449.99, image: "https://images.unsplash.com/photo-1533093818801-fa5d3d89b68d?w=400&h=400&fit=crop", link: "https://gopro.com/fr/fr/shop/cameras/hero12-black/", requiredLevel: 1 },
                { name: "DJI Mini 4 Pro", price: 759.00, image: "https://images.unsplash.com/photo-1507582020474-9a35b7d455d9?w=400&h=400&fit=crop", link: "https://www.dji.com/fr/mini-4-pro", requiredLevel: 1 },
                { name: "Fujifilm X-T5 Bo√Ætier", price: 1899.00, image: "https://images.unsplash.com/photo-1495121553079-4c61bcce1894?w=400&h=400&fit=crop", link: "https://fujifilm-x.com/fr-fr/products/cameras/x-t5/", requiredLevel: 2 },
                { name: "Canon EOS R6 Mark II Bo√Ætier", price: 2699.00, image: "https://images.unsplash.com/photo-1502920917128-1aa500764cbd?w=400&h=400&fit=crop", link: "https://www.canon.fr/cameras/eos-r6-mark-ii/", requiredLevel: 2 },
                { name: "Sony Alpha 7 IV Bo√Ætier", price: 2799.00, image: "https://images.unsplash.com/photo-1606980707577-6c8aee5f7c8a?w=400&h=400&fit=crop", link: "https://www.sony.fr/electronics/appareils-photo-objectifs-interchangeables/ilce-7m4", requiredLevel: 3 },
                { name: "DJI Mavic 3 Pro", price: 2199.00, image: "https://images.unsplash.com/photo-1473968512647-3e447244af8f?w=400&h=400&fit=crop", link: "https://www.dji.com/fr/mavic-3-pro", requiredLevel: 3 },
                { name: "Nikon Z8 Bo√Ætier", price: 4499.00, image: "https://images.unsplash.com/photo-1606979280099-23e937df638a?w=400&h=400&fit=crop", link: "https://www.nikon.fr/fr_FR/product/digital-cameras/mirrorless/professional/z-8", requiredLevel: 4 },
                { name: "Panasonic Lumix GH6", price: 2199.00, image: "https://images.unsplash.com/photo-1606980817431-c31c1e8f48a8?w=400&h=400&fit=crop", link: "https://www.panasonic.com/fr/consumer/photo-video/lumix-appareils-photo-hybrides/lumix-gh6.html", requiredLevel: 4 },
                { name: "Insta360 X3", price: 469.99, image: "https://images.unsplash.com/photo-1606925191677-5e1d46fe9a1e?w=400&h=400&fit=crop", link: "https://www.insta360.com/fr/product/insta360-x3", requiredLevel: 5 },
                { name: "DJI Osmo Action 4", price: 399.00, image: "https://images.unsplash.com/photo-1606979283836-3e510b9b8e04?w=400&h=400&fit=crop", link: "https://www.dji.com/fr/osmo-action-4", requiredLevel: 6 }
            ],
            'Maison connect√©e': [
                { name: "Amazon Echo Dot 5√®me gen", price: 59.99, image: "https://images.unsplash.com/photo-1543512214-318c7553f230?w=400&h=400&fit=crop", link: "https://www.amazon.fr/echo-dot", requiredLevel: 1 },
                { name: "Google Nest Hub 2√®me gen", price: 99.99, image: "https://images.unsplash.com/photo-1558089687379-51eec7a6c9e8?w=400&h=400&fit=crop", link: "https://store.google.com/fr/product/nest_hub_2nd_gen", requiredLevel: 1 },
                { name: "Philips Hue Kit 3 ampoules E27", price: 129.99, image: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=400&fit=crop", link: "https://www.philips-hue.com/fr-fr", requiredLevel: 2 },
                { name: "Ring Video Doorbell Pro 2", price: 249.99, image: "https://images.unsplash.com/photo-1558002038-1055907df827?w=400&h=400&fit=crop", link: "https://fr-fr.ring.com/products/video-doorbell-pro-2", requiredLevel: 2 },
                { name: "Dyson V15 Detect Aspirateur", price: 749.00, image: "https://images.unsplash.com/photo-1558317374-067fb5f30001?w=400&h=400&fit=crop", link: "https://www.dyson.fr/aspirateurs/sans-fil/v15-detect", requiredLevel: 3 },
                { name: "iRobot Roomba j7+", price: 799.00, image: "https://images.unsplash.com/photo-1625048082589-298a0c962e6f?w=400&h=400&fit=crop", link: "https://www.irobot.fr/roomba/j-series", requiredLevel: 3 },
                { name: "Netatmo Station M√©t√©o", price: 179.99, image: "https://images.unsplash.com/photo-1592294612811-9d951ff6f3e0?w=400&h=400&fit=crop", link: "https://www.netatmo.com/fr-fr/weather", requiredLevel: 4 },
                { name: "Arlo Pro 4 Cam√©ra", price: 219.99, image: "https://images.unsplash.com/photo-1557324232-b8917d3c3dcb?w=400&h=400&fit=crop", link: "https://www.arlo.com/fr/products/arlo-pro-4", requiredLevel: 4 },
                { name: "Nest Learning Thermostat", price: 249.00, image: "https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=400&fit=crop", link: "https://store.google.com/fr/product/nest_learning_thermostat_3rd_gen", requiredLevel: 5 },
                { name: "August Smart Lock Pro", price: 279.00, image: "https://images.unsplash.com/photo-1558002038-1055907df827?w=400&h=400&fit=crop", link: "https://august.com/products/august-smart-lock-pro-connect", requiredLevel: 6 }
            ],
            'Premium': [
                { name: "MacBook Pro 16\" M3 Max 1 To", price: 3999.00, image: "https://images.unsplash.com/photo-1484788984921-03950022c9ef?w=400&h=400&fit=crop", link: "https://www.apple.com/fr/macbook-pro-14-and-16/", requiredLevel: 1 },
                { name: "Samsung OLED 77\" S95C", price: 3999.00, image: "https://images.unsplash.com/photo-1593359677879-a4bb92f829d1?w=400&h=400&fit=crop", link: "https://www.samsung.com/fr/tvs/oled-tv/", requiredLevel: 1 },
                { name: "LG OLED evo 77\" G3", price: 4999.00, image: "https://images.unsplash.com/photo-1593784991095-a205069470b6?w=400&h=400&fit=crop", link: "https://www.lg.com/fr/televiseurs/oled-tv", requiredLevel: 2 },
                { name: "Sony A95K OLED 65\"", price: 3299.00, image: "https://images.unsplash.com/photo-1593359677879-a4bb92f829d1?w=400&h=400&fit=crop", link: "https://www.sony.fr/electronics/televiseurs/a95k-series", requiredLevel: 2 },
                { name: "Bang & Olufsen Beosound Theatre", price: 8990.00, image: "https://images.unsplash.com/photo-1545127398-14699f92334b?w=400&h=400&fit=crop", link: "https://www.bang-olufsen.com/fr/fr/speakers/beosound-theatre", requiredLevel: 3 },
                { name: "Bose Lifestyle 650", price: 3999.00, image: "https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=400&h=400&fit=crop", link: "https://www.bose.fr/products/speakers/home-theater/lifestyle-650", requiredLevel: 3 },
                { name: "Apple Mac Studio M2 Ultra", price: 4749.00, image: "https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=400&h=400&fit=crop", link: "https://www.apple.com/fr/mac-studio/", requiredLevel: 4 },
                { name: "Samsung Odyssey Ark 55\"", price: 2999.00, image: "https://images.unsplash.com/photo-1547082299-de196ea013d6?w=400&h=400&fit=crop", link: "https://www.samsung.com/fr/monitors/gaming/odyssey-ark/", requiredLevel: 4 },
                { name: "Sonos Arc Ultra Soundbar", price: 999.00, image: "https://images.unsplash.com/photo-1545127398-14699f92334b?w=400&h=400&fit=crop", link: "https://www.sonos.com/fr-fr/shop/arc-ultra", requiredLevel: 5 },
                { name: "LG StanbyME Go 27\"", price: 1099.00, image: "https://images.unsplash.com/photo-1593784991095-a205069470b6?w=400&h=400&fit=crop", link: "https://www.lg.com/fr/televiseurs/lg-27lx5qkna", requiredLevel: 6 }
            ],
            '√âquipements de Fitness': [
                { name: "Peloton Bike+", price: 2495.00, image: "https://images.unsplash.com/photo-1605296867304-46d5465a13f1?w=400&h=400&fit=crop", link: "https://www.onepeloton.fr/shop/bike-plus", requiredLevel: 1 },
                { name: "Technogym Bench", price: 1590.00, image: "https://images.unsplash.com/photo-1517836357463-d25dfeac3438?w=400&h=400&fit=crop", link: "https://www.technogym.com/fr/bench.html", requiredLevel: 1 },
                { name: "Bowflex SelectTech 552i", price: 549.00, image: "https://images.unsplash.com/photo-1583454110551-21f2fa2afe61?w=400&h=400&fit=crop", link: "https://www.bowflex.com/selecttech/552i/100318.html", requiredLevel: 2 },
                { name: "NordicTrack T Series Treadmill", price: 999.00, image: "https://images.unsplash.com/photo-1576678927484-cc907957088c?w=400&h=400&fit=crop", link: "https://www.nordictrack.fr/treadmills", requiredLevel: 2 },
                { name: "Concept2 Model D Rower", price: 1015.00, image: "https://images.unsplash.com/photo-1518611012118-696072aa579a?w=400&h=400&fit=crop", link: "https://www.concept2.com/indoor-rowers/model-d", requiredLevel: 3 },
                { name: "TRX Pro4 System", price: 199.95, image: "https://images.unsplash.com/photo-1517836357463-d25dfeac3438?w=400&h=400&fit=crop", link: "https://www.trxtraining.com/products/trx-pro4-system", requiredLevel: 3 },
                { name: "Theragun Elite", price: 399.00, image: "https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?w=400&h=400&fit=crop", link: "https://www.therabody.com/fr/fr/theragun-elite.html", requiredLevel: 4 },
                { name: "Hyperice Hypervolt 2 Pro", price: 399.00, image: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=400&fit=crop", link: "https://hyperice.com/hypervolt-2-pro", requiredLevel: 4 },
                { name: "Tonal Smart Home Gym", price: 2995.00, image: "https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=400&h=400&fit=crop", link: "https://www.tonal.com/", requiredLevel: 5 },
                { name: "Hydrow Rower", price: 2495.00, image: "https://images.unsplash.com/photo-1518611012118-696072aa579a?w=400&h=400&fit=crop", link: "https://www.hydrow.com/", requiredLevel: 6 }
            ],
            'Cuisine High-Tech': [
                { name: "Thermomix TM6", price: 1399.00, image: "https://images.unsplash.com/photo-1585515320310-259814833e62?w=400&h=400&fit=crop", link: "https://www.vorwerk.fr/thermomix/", requiredLevel: 1 },
                { name: "KitchenAid Artisan 5KSM175", price: 699.00, image: "https://images.unsplash.com/photo-1570222094114-d054a817e56b?w=400&h=400&fit=crop", link: "https://www.kitchenaid.fr/", requiredLevel: 1 },
                { name: "Ninja Foodi MAX", price: 299.99, image: "https://images.unsplash.com/photo-1585515320310-259814833e62?w=400&h=400&fit=crop", link: "https://www.ninjakitchen.fr/products/ninja-foodi-max", requiredLevel: 2 },
                { name: "Sage the Barista Express", price: 699.00, image: "https://images.unsplash.com/photo-1517668808822-9ebb02f2a0e6?w=400&h=400&fit=crop", link: "https://www.sageappliances.com/fr/fr/products/espresso/bes870.html", requiredLevel: 2 },
                { name: "Smeg FAB28 R√©frig√©rateur", price: 1499.00, image: "https://images.unsplash.com/photo-1571175443880-49e1d25b2bc5?w=400&h=400&fit=crop", link: "https://www.smeg.fr/refrigerateurs/fab28", requiredLevel: 3 },
                { name: "KitchenAid Artisan Blender", price: 399.00, image: "https://images.unsplash.com/photo-1570222094114-d054a817e56b?w=400&h=400&fit=crop", link: "https://www.kitchenaid.fr/blenders", requiredLevel: 3 },
                { name: "Meater+ Thermom√®tre Connect√©", price: 119.00, image: "https://images.unsplash.com/photo-1556909212-d5b604d0c90d?w=400&h=400&fit=crop", link: "https://meater.com/products/meater-plus", requiredLevel: 4 },
                { name: "Anova Precision Cooker Pro", price: 399.00, image: "https://images.unsplash.com/photo-1556909212-d5b604d0c90d?w=400&h=400&fit=crop", link: "https://anovaculinary.com/anova-precision-cooker-pro/", requiredLevel: 4 },
                { name: "Vitamix A3500i Ascent", price: 749.00, image: "https://images.unsplash.com/photo-1585515320310-259814833e62?w=400&h=400&fit=crop", link: "https://www.vitamix.com/fr/fr-fr/shop/a3500i", requiredLevel: 5 },
                { name: "Breville the Oracle Touch", price: 2499.00, image: "https://images.unsplash.com/photo-1517668808822-9ebb02f2a0e6?w=400&h=400&fit=crop", link: "https://www.brevilleusa.com/products/the-oracle-touch", requiredLevel: 6 }
            ],
            'Instruments de musique': [
                { name: "Yamaha P-125 Piano Num√©rique", price: 699.00, image: "https://images.unsplash.com/photo-1520523839897-bd0b52f945a0?w=400&h=400&fit=crop", link: "https://fr.yamaha.com/fr/products/musical_instruments/pianos/p_series/p-125/", requiredLevel: 1 },
                { name: "Fender Player Stratocaster", price: 849.00, image: "https://images.unsplash.com/photo-1564186763535-ebb21ef5277f?w=400&h=400&fit=crop", link: "https://www.fender.com/fr-FR/electric-guitars/stratocaster/player-stratocaster/", requiredLevel: 1 },
                { name: "Roland TD-17KVX V-Drums", price: 1999.00, image: "https://images.unsplash.com/photo-1519892300165-cb5542fb47c7?w=400&h=400&fit=crop", link: "https://www.roland.com/fr/products/td-17kvx/", requiredLevel: 2 },
                { name: "Korg MicroKorg Synth√©", price: 399.00, image: "https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=400&h=400&fit=crop", link: "https://www.korg.com/fr/products/synthesizers/microkorg/", requiredLevel: 2 },
                { name: "Gibson Les Paul Standard", price: 2799.00, image: "https://images.unsplash.com/photo-1564186763535-ebb21ef5277f?w=400&h=400&fit=crop", link: "https://www.gibson.com/fr-FR/Guitar/USA5F4228/Les-Paul-Standard-50s", requiredLevel: 3 },
                { name: "Native Instruments Maschine+", price: 1349.00, image: "https://images.unsplash.com/photo-1598488035139-bdbb2231ce04?w=400&h=400&fit=crop", link: "https://www.native-instruments.com/fr/products/maschine/production-systems/maschine-plus/", requiredLevel: 3 },
                { name: "Akai Professional MPK Mini MK3", price: 119.00, image: "https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=400&h=400&fit=crop", link: "https://www.akaipro.com/mpk-mini-mk3", requiredLevel: 4 },
                { name: "Teenage Engineering OP-1", price: 1399.00, image: "https://images.unsplash.com/photo-1598488035139-bdbb2231ce04?w=400&h=400&fit=crop", link: "https://teenage.engineering/products/op-1", requiredLevel: 4 },
                { name: "Arturia KeyLab Essential 61", price: 279.00, image: "https://images.unsplash.com/photo-1520523839897-bd0b52f945a0?w=400&h=400&fit=crop", link: "https://www.arturia.com/products/hybrid-synths/keylab-essential/overview", requiredLevel: 5 },
                { name: "Moog Subsequent 25", price: 799.00, image: "https://images.unsplash.com/photo-1511379938547-c1f69419868d?w=400&h=400&fit=crop", link: "https://www.moogmusic.com/products/subsequent-25", requiredLevel: 6 }
            ],
            'Objets R√©tro & Vintage': [
                { name: "Polaroid Now+ Gen 2", price: 149.99, image: "https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?w=400&h=400&fit=crop", link: "https://www.polaroid.com/products/polaroid-now-plus-gen-2", requiredLevel: 1 },
                { name: "Crosley Cruiser Deluxe", price: 89.99, image: "https://images.unsplash.com/photo-1603048588665-791ca8aea617?w=400&h=400&fit=crop", link: "https://www.crosleyradio.com/turntables/product-details?productkey=CR8005D", requiredLevel: 1 },
                { name: "Victrola Vintage 3-Speed", price: 79.99, image: "https://images.unsplash.com/photo-1603048588665-791ca8aea617?w=400&h=400&fit=crop", link: "https://www.victrola.com/products/bluetooth-suitcase-turntable", requiredLevel: 2 },
                { name: "Fujifilm Instax Mini 12", price: 79.99, image: "https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?w=400&h=400&fit=crop", link: "https://instax.com/mini12/fr/", requiredLevel: 2 },
                { name: "Roberts Revival RD70", price: 249.00, image: "https://images.unsplash.com/photo-1585760905981-28ca36430012?w=400&h=400&fit=crop", link: "https://www.robertsradio.com/products/revival-rd70", requiredLevel: 3 },
                { name: "Audio-Technica AT-LP120X", price: 349.00, image: "https://images.unsplash.com/photo-1603048588665-791ca8aea617?w=400&h=400&fit=crop", link: "https://www.audio-technica.com/fr-fr/at-lp120xusb", requiredLevel: 3 },
                { name: "Lomography LC-A 120", price: 349.00, image: "https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?w=400&h=400&fit=crop", link: "https://shop.lomography.com/en/lc-a-120", requiredLevel: 4 },
                { name: "SMEG TSF01 Grille-pain", price: 189.00, image: "https://images.unsplash.com/photo-1585760905981-28ca36430012?w=400&h=400&fit=crop", link: "https://www.smeg.fr/petit-electromenager/tsf01", requiredLevel: 4 },
                { name: "Pro-Ject Debut Carbon EVO", price: 599.00, image: "https://images.unsplash.com/photo-1603048588665-791ca8aea617?w=400&h=400&fit=crop", link: "https://www.project-audio.com/fr/product/debut-carbon-evo/", requiredLevel: 5 },
                { name: "Leica M-A Film Camera", price: 5295.00, image: "https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?w=400&h=400&fit=crop", link: "https://leica-camera.com/fr-FR/photographie/appareils-photo/m/m-a-type-127-silver", requiredLevel: 6 }
            ],
            'Figurines & Collectibles': [
                { name: "Funko Pop! Marvel Avengers Set", price: 49.99, image: "https://images.unsplash.com/photo-1601814933824-fd0b574dd592?w=400&h=400&fit=crop", link: "https://www.funko.com/", requiredLevel: 1 },
                { name: "LEGO Star Wars UCS Millennium Falcon", price: 849.99, image: "https://images.unsplash.com/photo-1587654780291-39c9404d746b?w=400&h=400&fit=crop", link: "https://www.lego.com/fr-fr/product/millennium-falcon-75192", requiredLevel: 1 },
                { name: "Hot Toys Iron Man Mark 85", price: 429.00, image: "https://images.unsplash.com/photo-1601814933824-fd0b574dd592?w=400&h=400&fit=crop", link: "https://www.hottoys.com.hk/", requiredLevel: 2 },
                { name: "LEGO Ideas NASA Apollo Saturn V", price: 139.99, image: "https://images.unsplash.com/photo-1587654780291-39c9404d746b?w=400&h=400&fit=crop", link: "https://www.lego.com/fr-fr/product/lego-nasa-apollo-saturn-v-92176", requiredLevel: 2 },
                { name: "Banpresto Dragon Ball Z Figure", price: 89.99, image: "https://images.unsplash.com/photo-1601814933824-fd0b574dd592?w=400&h=400&fit=crop", link: "https://bandainamco-am.co.jp/am/prize/banpresto/", requiredLevel: 3 },
                { name: "Sideshow Premium Format Darth Vader", price: 649.00, image: "https://images.unsplash.com/photo-1601814933824-fd0b574dd592?w=400&h=400&fit=crop", link: "https://www.sideshow.com/", requiredLevel: 3 },
                { name: "LEGO Technic Bugatti Chiron", price: 379.99, image: "https://images.unsplash.com/photo-1587654780291-39c9404d746b?w=400&h=400&fit=crop", link: "https://www.lego.com/fr-fr/product/bugatti-chiron-42083", requiredLevel: 4 },
                { name: "First 4 Figures Sonic Statue", price: 399.99, image: "https://images.unsplash.com/photo-1601814933824-fd0b574dd592?w=400&h=400&fit=crop", link: "https://www.first4figures.com/", requiredLevel: 4 },
                { name: "Prime 1 Studio Batman Statue", price: 1199.00, image: "https://images.unsplash.com/photo-1601814933824-fd0b574dd592?w=400&h=400&fit=crop", link: "https://www.prime1studio.com/", requiredLevel: 5 },
                { name: "LEGO Creator Expert Taj Mahal", price: 369.99, image: "https://images.unsplash.com/photo-1587654780291-39c9404d746b?w=400&h=400&fit=crop", link: "https://www.lego.com/fr-fr/product/taj-mahal-10256", requiredLevel: 6 }
            ],
            'D√©coration Artistique': [
                { name: "Philips Hue Play Gradient Lightstrip", price: 239.99, image: "https://images.unsplash.com/photo-1513506003901-1e6a229e2d15?w=400&h=400&fit=crop", link: "https://www.philips-hue.com/fr-fr/p/hue-white-and-color-ambiance-play-gradient-lightstrip/046677560423", requiredLevel: 1 },
                { name: "Nanoleaf Shapes Triangles", price: 199.99, image: "https://images.unsplash.com/photo-1513506003901-1e6a229e2d15?w=400&h=400&fit=crop", link: "https://nanoleaf.me/fr-FR/products/shapes/", requiredLevel: 1 },
                { name: "Govee DreamView T1 TV Backlight", price: 89.99, image: "https://images.unsplash.com/photo-1513506003901-1e6a229e2d15?w=400&h=400&fit=crop", link: "https://govee.com/products/govee-dreamview-t1-tv-backlight", requiredLevel: 2 },
                { name: "IKEA SYMFONISK Cadre Sonos", price: 219.00, image: "https://images.unsplash.com/photo-1513506003901-1e6a229e2d15?w=400&h=400&fit=crop", link: "https://www.ikea.com/fr/fr/p/symfonisk-cadre-avec-enceinte-wifi-noir-50487996/", requiredLevel: 2 },
                { name: "Meural Canvas II Digital Art", price: 599.00, image: "https://images.unsplash.com/photo-1513506003901-1e6a229e2d15?w=400&h=400&fit=crop", link: "https://meural.com/products/meural-canvas-ii", requiredLevel: 3 },
                { name: "Yeelight Aurora Lightstrip Plus", price: 119.99, image: "https://images.unsplash.com/photo-1513506003901-1e6a229e2d15?w=400&h=400&fit=crop", link: "https://www.yeelight.com/en_US/product/yeelight-aurora", requiredLevel: 3 },
                { name: "Twinkly Smart LED String 250", price: 179.99, image: "https://images.unsplash.com/photo-1513506003901-1e6a229e2d15?w=400&h=400&fit=crop", link: "https://www.twinkly.com/products/strings/", requiredLevel: 4 },
                { name: "Artiphon Orba 2", price: 149.00, image: "https://images.unsplash.com/photo-1513506003901-1e6a229e2d15?w=400&h=400&fit=crop", link: "https://artiphon.com/products/orba-2", requiredLevel: 4 },
                { name: "Samsung The Frame 55\"", price: 1499.00, image: "https://images.unsplash.com/photo-1513506003901-1e6a229e2d15?w=400&h=400&fit=crop", link: "https://www.samsung.com/fr/tvs/the-frame/", requiredLevel: 5 },
                { name: "Lume Cube Cordless Ring Light", price: 99.95, image: "https://images.unsplash.com/photo-1513506003901-1e6a229e2d15?w=400&h=400&fit=crop", link: "https://lumecube.com/products/cordless-ring-light", requiredLevel: 6 }
            ],
            'Produits Insolites': [
                { name: "Ember Temperature Control Mug", price: 129.95, image: "https://images.unsplash.com/photo-1514228742587-6b1558fcca3d?w=400&h=400&fit=crop", link: "https://ember.com/products/ember-mug-2", requiredLevel: 1 },
                { name: "Flipper Zero Multi-Tool", price: 169.00, image: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=400&h=400&fit=crop", link: "https://flipperzero.one/", requiredLevel: 1 },
                { name: "Sphero BOLT+ Robot", price: 179.99, image: "https://images.unsplash.com/photo-1561144257-e32e347d5834?w=400&h=400&fit=crop", link: "https://sphero.com/products/sphero-bolt-plus", requiredLevel: 2 },
                { name: "Anker 3D Printing Pen", price: 79.99, image: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=400&h=400&fit=crop", link: "https://www.anker.com/", requiredLevel: 2 },
                { name: "Miniware MDS Lite Soldering Iron", price: 139.00, image: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=400&h=400&fit=crop", link: "https://miniware.com.cn/product/mds-lite/", requiredLevel: 3 },
                { name: "Anycubic Kobra 2 3D Printer", price: 349.00, image: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=400&h=400&fit=crop", link: "https://www.anycubic.com/products/kobra-2", requiredLevel: 3 },
                { name: "DJI Avata FPV Drone", price: 579.00, image: "https://images.unsplash.com/photo-1473968512647-3e447244af8f?w=400&h=400&fit=crop", link: "https://www.dji.com/fr/avata", requiredLevel: 4 },
                { name: "Remarkable 2 Paper Tablet", price: 399.00, image: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=400&h=400&fit=crop", link: "https://remarkable.com/store/remarkable-2", requiredLevel: 4 },
                { name: "Creality Ender-3 V3 SE", price: 299.00, image: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=400&h=400&fit=crop", link: "https://www.creality.com/products/ender-3-v3-se-3d-printer", requiredLevel: 5 },
                { name: "Framework Laptop DIY Edition", price: 1449.00, image: "https://images.unsplash.com/photo-1593642632823-8f785ba67e45?w=400&h=400&fit=crop", link: "https://frame.work/", requiredLevel: 6 }
            ],
            'Luxury Fashion': [
                { name: "Louis Vuitton Keepall Bandouli√®re 55", price: 2450.00, image: "https://images.unsplash.com/photo-1590874103328-eac38a683ce7?w=400&h=400&fit=crop", link: "https://fr.louisvuitton.com/", requiredLevel: 1 },
                { name: "Gucci GG Marmont Matelass√©", price: 1890.00, image: "https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=400&h=400&fit=crop", link: "https://www.gucci.com/fr/fr/", requiredLevel: 1 },
                { name: "Rolex Oyster Perpetual 41", price: 6550.00, image: "https://images.unsplash.com/photo-1523170335258-f5ed11844a49?w=400&h=400&fit=crop", link: "https://www.rolex.com/fr", requiredLevel: 2 },
                { name: "Herm√®s Birkin 30", price: 12500.00, image: "https://images.unsplash.com/photo-1590874103328-eac38a683ce7?w=400&h=400&fit=crop", link: "https://www.hermes.com/fr/fr/", requiredLevel: 2 },
                { name: "Cartier Love Bracelet Or Blanc", price: 7550.00, image: "https://images.unsplash.com/photo-1535632066927-ab7c9ab60908?w=400&h=400&fit=crop", link: "https://www.cartier.com/fr-fr/", requiredLevel: 3 },
                { name: "Chanel Classic Flap Bag Medium", price: 9900.00, image: "https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=400&h=400&fit=crop", link: "https://www.chanel.com/fr/", requiredLevel: 3 },
                { name: "Balenciaga Triple S Sneakers", price: 1050.00, image: "https://images.unsplash.com/photo-1600185365926-3a2ce3cdb9eb?w=400&h=400&fit=crop", link: "https://www.balenciaga.com/fr-fr", requiredLevel: 4 },
                { name: "Omega Speedmaster Professional", price: 6800.00, image: "https://images.unsplash.com/photo-1523170335258-f5ed11844a49?w=400&h=400&fit=crop", link: "https://www.omegawatches.com/fr/", requiredLevel: 4 },
                { name: "Prada Re-Edition 2005 Nylon Bag", price: 950.00, image: "https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=400&h=400&fit=crop", link: "https://www.prada.com/fr/fr.html", requiredLevel: 5 },
                { name: "Dior Saddle Bag", price: 3200.00, image: "https://images.unsplash.com/photo-1584917865442-de89df76afd3?w=400&h=400&fit=crop", link: "https://www.dior.com/fr/fr", requiredLevel: 6 }
            ]
        };


        let currentProduct;
        let timeLeft = 60;
        let timerInterval;
        let gameActive = false;
        let attempts = 0;
        let gameMode = 'normal';
        let selectedCategories = ['√âlectronique de base'];

        updatePlayerStats();
        renderCategories();

        function updatePlayerStats() {
            document.getElementById('playerLevel').textContent = playerData.level;
            document.getElementById('playerMoney').textContent = playerData.money + '‚Ç¨';
            document.getElementById('playerWins').textContent = playerData.wins;
            document.getElementById('xpProgress').textContent = `${playerData.xp}/${playerData.xpToNextLevel} XP`;
            savePlayerData();
        }

        function savePlayerData() {
            localStorage.setItem('playerData', JSON.stringify(playerData));
        }

        function getAvailableProductsCount(categoryName) {
            const products = productsByCategory[categoryName];
            if (!products) return 0;
            return products.filter(p => p.requiredLevel <= playerData.level).length;
        }

        function renderCategories() {
            const grid = document.getElementById('categoriesGrid');
            grid.innerHTML = '';
            categories.forEach(cat => {
                const isUnlocked = playerData.unlockedCategories.includes(cat.name);
                const canUnlock = playerData.money >= cat.unlockCost && playerData.level >= cat.unlockLevel;
                const isSelected = selectedCategories.includes(cat.name);
                const availableProducts = getAvailableProductsCount(cat.name);
                const totalProducts = productsByCategory[cat.name]?.length || 0;
                
                const card = document.createElement('div');
                card.className = `category-card ${isUnlocked ? (isSelected ? 'active' : '') : 'locked'}`;
                if (isUnlocked) {
                    card.onclick = () => toggleCategorySelection(cat.name);
                }
                
                card.innerHTML = `
                    ${isUnlocked ? `<input type="checkbox" class="category-checkbox" ${isSelected ? 'checked' : ''} onchange="toggleCategorySelection('${cat.name}')">` : ''}
                    <div class="category-icon">${cat.icon}</div>
                    <div class="category-name">${cat.name}</div>
                    ${isUnlocked ? `
                        <div class="product-count">üì¶ ${availableProducts}/${totalProducts} produits</div>
                    ` : `
                        <div class="lock-icon">üîí</div>
                        <div class="category-unlock">
                            Niveau ${cat.unlockLevel}<br>
                            ${cat.unlockCost}‚Ç¨
                        </div>
                        ${canUnlock ? `<button class="unlock-btn" onclick="unlockCategory('${cat.name}', ${cat.unlockCost}); event.stopPropagation();">D√©bloquer</button>` : `<button class="unlock-btn" disabled>D√©bloquer</button>`}
                    `}
                `;
                grid.appendChild(card);
            });
        }

        function toggleCategorySelection(categoryName) {
            const index = selectedCategories.indexOf(categoryName);
            if (index === -1) {
                selectedCategories.push(categoryName);
            } else {
                selectedCategories.splice(index, 1);
            }
            if (selectedCategories.length === 0) {
                selectedCategories.push('√âlectronique de base');
            }
            renderCategories();
            document.getElementById('startGameBtn').disabled = false;
        }

        function unlockCategory(categoryName, cost) {
            const cat = categories.find(c => c.name === categoryName);
            if (playerData.money >= cost && playerData.level >= cat.unlockLevel) {
                playerData.money -= cost;
                playerData.unlockedCategories.push(categoryName);
                selectedCategories.push(categoryName);
                updatePlayerStats();
                renderCategories();
                alert(`üéâ Cat√©gorie "${categoryName}" d√©bloqu√©e !`);
            }
        }

        function selectMode(mode) {
            gameMode = mode;
            document.querySelectorAll('.mode-card').forEach(card => {
                card.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
        }

        function startGameWithMode() {
            if (selectedCategories.length === 0) {
                alert('Veuillez s√©lectionner au moins une cat√©gorie !');
                return;
            }
            let hasAvailableProducts = false;
            selectedCategories.forEach(cat => {
                if (getAvailableProductsCount(cat) > 0) {
                    hasAvailableProducts = true;
                }
            });
            if (!hasAvailableProducts) {
                alert('‚ö†Ô∏è Aucune cat√©gorie s√©lectionn√©e ne contient de produits disponibles √† votre niveau !');
                return;
            }
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('gameArea').style.display = 'block';
            
            const badge = document.getElementById('modeBadge');
            if (gameMode === 'normal') {
                badge.textContent = 'üü¢ MODE NORMAL';
                badge.className = 'mode-badge normal';
            } else {
                badge.textContent = 'üî¥ MODE EXPERT';
                badge.className = 'mode-badge expert';
            }
            startGame();
        }

        function backToMenu() {
            document.getElementById('startScreen').style.display = 'block';
            document.getElementById('gameArea').style.display = 'none';
            document.getElementById('timer').classList.remove('warning');
            document.getElementById('productLink').classList.remove('show');
            if (timerInterval) {
                clearInterval(timerInterval);
            }
        }

        function startGame() {
            let allAvailableProducts = [];
            selectedCategories.forEach(cat => {
                const categoryProducts = productsByCategory[cat];
                const availableProducts = categoryProducts.filter(p => p.requiredLevel <= playerData.level);
                allAvailableProducts = allAvailableProducts.concat(availableProducts);
            });
            
            if (allAvailableProducts.length === 0) {
                alert('‚ö†Ô∏è Aucun produit disponible dans les cat√©gories s√©lectionn√©es !');
                backToMenu();
                return;
            }
            
            currentProduct = allAvailableProducts[Math.floor(Math.random() * allAvailableProducts.length)];
            timeLeft = gameMode === 'expert' ? 30 : 60;
            attempts = 0;
            gameActive = true;
            
            document.getElementById('productImage').src = currentProduct.image;
            document.getElementById('productName').textContent = currentProduct.name;
            document.getElementById('productLink').href = currentProduct.link;
            document.getElementById('productLink').classList.remove('show');
            document.getElementById('priceInput').value = '';
            document.getElementById('priceInput').disabled = false;
            document.getElementById('submitBtn').disabled = false;
            document.getElementById('feedback').classList.remove('show');
            document.getElementById('gameOver').classList.remove('show');
            document.getElementById('attempts').textContent = 'Tentatives: 0';
            document.getElementById('realPrice').textContent = '';
            document.getElementById('rewardDisplay').textContent = '';
            
            if (gameMode === 'expert') {
                document.getElementById('priceInput').placeholder = 'Prix exact avec centimes (ex: 299.99)';
                document.getElementById('priceInput').step = '0.01';
            } else {
                document.getElementById('priceInput').placeholder = 'Entrez votre prix en ‚Ç¨ (arrondi)';
                document.getElementById('priceInput').step = '1';
            }
            
            startTimer();
        }

        function startTimer() {
            updateTimerDisplay();
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                if (timeLeft <= 10) {
                    document.getElementById('timer').classList.add('warning');
                }
                if (timeLeft <= 0) {
                    endGame(false);
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timer').textContent =
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function submitGuess() {
            if (!gameActive) return;
            
            const guess = parseFloat(document.getElementById('priceInput').value);
            if (isNaN(guess) || guess <= 0) {
                showFeedback('Veuillez entrer un prix valide !', 'higher');
                return;
            }
            
            attempts++;
            document.getElementById('attempts').textContent = `Tentatives: ${attempts}`;
            
            let targetPrice = currentProduct.price;
            let isCorrect = false;
            
            if (gameMode === 'expert') {
                isCorrect = guess === targetPrice;
            } else {
                targetPrice = Math.round(targetPrice);
                const guessRounded = Math.round(guess);
                isCorrect = guessRounded === targetPrice;
            }
            
            if (isCorrect) {
                endGame(true);
            } else if (gameMode === 'expert') {
                if (guess > targetPrice) {
                    showFeedback('C\'est MOINS ! üìâ', 'lower');
                } else {
                    showFeedback('C\'est PLUS ! üìà', 'higher');
                }
            } else {
                if (Math.round(guess) > targetPrice) {
                    showFeedback('C\'est MOINS ! üìâ', 'lower');
                } else {
                    showFeedback('C\'est PLUS ! üìà', 'higher');
                }
            }
            
            document.getElementById('priceInput').value = '';
            document.getElementById('priceInput').focus();
        }

        function showFeedback(message, type) {
            const feedback = document.getElementById('feedback');
            feedback.textContent = message;
            feedback.className = 'feedback show ' + type;
        }

        function endGame(won) {
            gameActive = false;
            clearInterval(timerInterval);
            document.getElementById('priceInput').disabled = true;
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('timer').classList.remove('warning');
            document.getElementById('productLink').classList.add('show');
            
            const displayPrice = gameMode === 'expert'
                ? currentProduct.price.toFixed(2) + '‚Ç¨'
                : Math.round(currentProduct.price) + '‚Ç¨';
            
            if (won) {
                let moneyReward = gameMode === 'expert' ? 1500 : 500;
                let xpReward = gameMode === 'expert' ? 20 : 10;
                
                moneyReward = Math.floor(moneyReward);
                xpReward = Math.floor(xpReward);
                
                playerData.money += moneyReward;
                playerData.xp += xpReward;
                playerData.wins++;
                
                if (playerData.xp >= playerData.xpToNextLevel) {
                    playerData.level++;
                    playerData.xp -= playerData.xpToNextLevel;
                    playerData.xpToNextLevel = Math.floor(playerData.xpToNextLevel * 1.5);
                    setTimeout(() => {
                        alert(`üéä NIVEAU SUP√âRIEUR ! Vous √™tes maintenant niveau ${playerData.level} !`);
                    }, 500);
                }
                
                updatePlayerStats();
                renderCategories();
                showFeedback(`üéâ BRAVO ! Le prix √©tait ${displayPrice} ! Trouv√© en ${attempts} tentative(s) !`, 'win');
                document.getElementById('rewardDisplay').textContent = `üí∞ +${moneyReward}‚Ç¨ | ‚≠ê +${xpReward} XP`;
            } else {
                document.getElementById('realPrice').textContent = `Le prix exact √©tait : ${displayPrice}`;
                showFeedback(`‚è±Ô∏è Temps √©coul√© !`, 'lose');
            }
            
            document.getElementById('gameOver').classList.add('show');
        }

        function newGame() {
            startGame();
        }

        document.getElementById('priceInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                submitGuess();
            }
        });
    </script>
</body>
</html>