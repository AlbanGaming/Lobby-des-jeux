{
name: â€œGoogle Nest Hub 2Ã¨me genâ€,
price: 99.99,
image: â€œhttps://images.unsplash.com/photo-1558089687-3716a1c8c8e4?w=400&h=400&fit=cropâ€,
link: â€œhttps://store.google.com/fr/product/nest_hub_2nd_genâ€
},
{
name: â€œPhilips Hue Kit 3 ampoules E27â€,
price: 129.99,
image: â€œhttps://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.garmin.com/fr-FR/p/735611â€,
requiredLevel: 4
},
{
name: â€œApple Watch Ultra 2â€,
price: 899.00,
image: â€œhttps://images.unsplash.com/photo-1579586337278-3befd40fd17a?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.apple.com/fr/apple-watch-ultra-2/â€,
requiredLevel: 5
}
],
â€˜Ordinateursâ€™: [
{
name: â€œMacBook Air M2 256 Goâ€,
price: 1199.00,
image: â€œhttps://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.apple.com/fr/macbook-air-m2/â€,
requiredLevel: 1
},
{
name: â€œDell XPS 15 Intel i7 512 Goâ€,
price: 1899.00,
image: â€œhttps://images.unsplash.com/photo-1593642632823-8f785ba67e45?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.dell.com/fr-fr/shop/laptops/xps-15/â€,
requiredLevel: 2
},
{
name: â€œHP Spectre x360 14" i7 1 Toâ€,
price: 1699.00,
image: â€œhttps://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.hp.com/fr-fr/shop/product.aspx?id=spectre-x360â€,
requiredLevel: 3
},
{
name: â€œAsus ROG Zephyrus G14 RTX 4060â€,
price: 1899.00,
image: â€œhttps://images.unsplash.com/photo-1603302576837-37561b2e2302?w=400&h=400&fit=cropâ€,
link: â€œhttps://rog.asus.com/fr/laptops/rog-zephyrus/rog-zephyrus-g14/â€,
requiredLevel: 4
},
{
name: â€œMacBook Pro 14" M3 512 Goâ€,
price: 2249.00,
image: â€œhttps://images.unsplash.com/photo-1611186871348-b1ce696e52c9?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.apple.com/fr/macbook-pro-14-and-16/â€,
requiredLevel: 5
},
{
name: â€œLenovo ThinkPad X1 Carbon i7â€,
price: 1799.00,
image: â€œhttps://images.unsplash.com/photo-1588872657578-7efd1f1555ed?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.lenovo.com/fr/fr/laptops/thinkpad/thinkpad-x1/x1-carbon-gen-11/â€,
requiredLevel: 6
}
],
â€˜Photo & VidÃ©oâ€™: [
{
name: â€œGoPro HERO 12 Blackâ€,
price: 449.99,
image: â€œhttps://images.unsplash.com/photo-1533093818801-fa5d3d89b68d?w=400&h=400&fit=cropâ€,
link: â€œhttps://gopro.com/fr/fr/shop/cameras/hero12-black/â€,
requiredLevel: 1
},
{
name: â€œDJI Mini 4 Proâ€,
price: 759.00,
image: â€œhttps://images.unsplash.com/photo-1507582020474-9a35b7d455d9?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.dji.com/fr/mini-4-proâ€,
requiredLevel: 2
},
{
name: â€œFujifilm X-T5 BoÃ®tierâ€,
price: 1899.00,
image: â€œhttps://images.unsplash.com/photo-1495121553079-4c61bcce1894?w=400&h=400&fit=cropâ€,
link: â€œhttps://fujifilm-x.com/fr-fr/products/cameras/x-t5/â€,
requiredLevel: 3
},
{
name: â€œCanon EOS R6 Mark II BoÃ®tierâ€,
price: 2699.00,
image: â€œhttps://images.unsplash.com/photo-1502920917128-1aa500764cbd?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.canon.fr/cameras/eos-r6-mark-ii/â€,
requiredLevel: 4
},
{
name: â€œSony Alpha 7 IV BoÃ®tierâ€,
price: 2799.00,
image: â€œhttps://images.unsplash.com/photo-1606980707577-6c8aee5f7c8a?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.sony.fr/electronics/appareils-photo-objectifs-interchangeables/ilce-7m4â€,
requiredLevel: 5
},
{
name: â€œDJI Mavic 3 Proâ€,
price: 2199.00,
image: â€œhttps://images.unsplash.com/photo-1473968512647-3e447244af8f?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.dji.com/fr/mavic-3-proâ€,
requiredLevel: 6
}
],
â€˜Maison connectÃ©eâ€™: [
{
name: â€œAmazon Echo Dot 5Ã¨me genâ€,
price: 59.99,
image: â€œhttps://images.unsplash.com/photo-1543512214-318c7553f230?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.amazon.fr/echo-dotâ€,
requiredLevel: 1
},
{
name: â€œGoogle Nest Hub 2Ã¨me genâ€,
price: 99.99,
image: â€œhttps://images.unsplash.com/photo-1558089687-3716a1c8c8e4?w=400&h=400&fit=cropâ€,
link: â€œhttps://store.google.com/fr/product/nest_hub_2nd_genâ€,
requiredLevel: 2
},
{
name: â€œPhilips Hue Kit 3 ampoules E27â€,
price: 129.99,
image: â€œhttps://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.philips-hue.com/fr-frâ€,
requiredLevel: 3
},
{
name: â€œRing Video Doorbell Pro 2â€,
price: 249.99,
image: â€œhttps://images.unsplash.com/photo-1558002038-1055907df827?w=400&h=400&fit=cropâ€,
link: â€œhttps://fr-fr.ring.com/products/video-doorbell-pro-2â€,
requiredLevel: 4
},
{
name: â€œDyson V15 Detect Aspirateurâ€,
price: 749.00,
image: â€œhttps://images.unsplash.com/photo-1558317374-067fb5f30001?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.dyson.fr/aspirateurs/sans-fil/v15-detectâ€,
requiredLevel: 5
},
{
name: â€œiRobot Roomba j7+â€,
price: 799.00,
image: â€œhttps://images.unsplash.com/photo-1625048082589-298a0c962e6f?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.irobot.fr/roomba/j-seriesâ€,
requiredLevel: 6
}
],
â€˜Premiumâ€™: [
{
name: â€œMacBook Pro 16" M3 Max 1 Toâ€,
price: 3999.00,
image: â€œhttps://images.unsplash.com/photo-1484788984921-03950022c9ef?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.apple.com/fr/macbook-pro-14-and-16/â€,
requiredLevel: 1
},
{
name: â€œSamsung OLED 55" S90Câ€,
price: 1799.00,
image: â€œhttps://images.unsplash.com/photo-1593359677879-a4bb92f829d1?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.samsung.com/fr/tvs/oled-tv/â€,
requiredLevel: 2
},
{
name: â€œLG OLED evo 65" C3â€,
price: 2299.00,
image: â€œhttps://images.unsplash.com/photo-1593784991095-a205069470b6?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.lg.com/fr/televiseurs/oled-tvâ€,
requiredLevel: 3
},
{
name: â€œCanada Goose Expedition Parkaâ€,
price: 1695.00,
image: â€œhttps://images.unsplash.com/photo-1539533018447-63fcce2678e3?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.canadagoose.com/fr/fr/expedition-parka/â€,
requiredLevel: 4
},
{
name: â€œRimowa Essential Cabin Sâ€,
price: 650.00,
image: â€œhttps://images.unsplash.com/photo-1581553680321-4fffae59fccd?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.rimowa.com/fr/fr/essential/cabin-s/â€,
requiredLevel: 5
},
{
name: â€œSamsung Odyssey G9 49" Curvedâ€,
price: 1499.00,
image: â€œhttps://images.unsplash.com/photo-1547082299-de196ea013d6?w=400&h=400&fit=cropâ€,
link: â€œhttps://www.samsung.com/fr/monitors/gaming/odyssey-g9/â€,
requiredLevel: 6
}
]
};

```
    let currentProduct;
    let timeLeft = 60;
    let timerInterval;
    let gameActive = false;
    let attempts = 0;
    let gameMode = 'normal';
    let selectedCategories = ['Ã‰lectronique de base']; // Maintenant un tableau

    // Initialiser l'affichage
    updatePlayerStats();
    renderCategories();

    // Mise Ã  jour des stats du joueur
    function updatePlayerStats() {
        document.getElementById('playerLevel').textContent = playerData.level;
        document.getElementById('playerMoney').textContent = playerData.money + 'â‚¬';
        document.getElementById('playerWins').textContent = playerData.wins;
        savePlayerData();
    }

    // Sauvegarder les donnÃ©es
    function savePlayerData() {
        localStorage.setItem('playerData', JSON.stringify(playerData));
    }

    // Compter les produits disponibles dans une catÃ©gorie selon le niveau
    function getAvailableProductsCount(categoryName) {
        const products = productsByCategory[categoryName];
        if (!products) return 0;
        return products.filter(p => p.requiredLevel <= playerData.level).length;
    }

    // Mettre Ã  jour l'info de sÃ©lection
    function updateSelectionInfo() {
        const info = document.getElementById('selectionInfo');
        if (selectedCategories.length === 0) {
            info.textContent = 'Aucune catÃ©gorie sÃ©lectionnÃ©e';
        } else {
            const totalProducts = selectedCategories.reduce((sum, cat) => {
                return sum + getAvailableProductsCount(cat);
            }, 0);
            info.textContent = `${selectedCategories.length} catÃ©gorie(s) sÃ©lectionnÃ©e(s) - ${totalProducts} produit(s) disponible(s)`;
        }
    }

    // Afficher les catÃ©gories
    function renderCategories() {
        const grid = document.getElementById('categoriesGrid');
        grid.innerHTML = '';
        
        categories.forEach(cat => {
            const isUnlocked = playerData.unlockedCategories.includes(cat.name);
            const isSelected = selectedCategories.includes(cat.name);
            const canUnlock = playerData.money >= cat.unlockCost;
            const availableProducts = getAvailableProductsCount(cat.name);
            const totalProducts = productsByCategory[cat.name]?.length || 0;
            
            const card = document.createElement('div');
            card.className = `category-card ${isUnlocked ? (isSelected ? 'selected' : '') : 'locked'}`;
            
            if (isUnlocked) {
                card.onclick = () => toggleCategory(cat.name);
            }
            
            card.innerHTML = `
                <div class="category-icon">${cat.icon}</div>
                <div class="category-name">${cat.name}</div>
                ${isUnlocked ? `
                    <div class="product-count">ðŸ“¦ ${availableProducts}/${totalProducts} produits</div>
                ` : `
                    <div class="lock-icon">ðŸ”’</div>
                    <div class="category-unlock">
                        CoÃ»t: ${cat.unlockCost}â‚¬
                    </div>
                    ${canUnlock ? `<button class="unlock-btn" onclick="unlockCategory('${cat.name}', ${cat.unlockCost}); event.stopPropagation();">Acheter</button>` : `<button class="unlock-btn" disabled>Acheter</button>`}
                `}
            `;
            
            grid.appendChild(card);
        });
        
        updateSelectionInfo();
    }

    // Basculer la sÃ©lection d'une catÃ©gorie
    function toggleCategory(categoryName) {
        const availableProducts = getAvailableProductsCount(categoryName);
        if (availableProducts === 0) {
            alert('âš ï¸ Aucun produit disponible dans cette catÃ©gorie Ã  votre niveau actuel !');
            return;
        }
        
        const index = selectedCategories.indexOf(categoryName);
        if (index > -1) {
            // DÃ©sÃ©lectionner
            selectedCategories.splice(index, 1);
        } else {
            // SÃ©lectionner
            selectedCategories.push(categoryName);
        }
        
        renderCategories();
        document.getElementById('startGameBtn').disabled = selectedCategories.length === 0;
    }

    // DÃ©bloquer une catÃ©gorie
    function unlockCategory(categoryName, cost) {
        if (playerData.money >= cost) {
            playerData.money -= cost;
            playerData.unlockedCategories.push(categoryName);
            selectedCategories.push(categoryName);
            updatePlayerStats();
            renderCategories();
            alert(`ðŸŽ‰ CatÃ©gorie "${categoryName}" dÃ©bloquÃ©e et sÃ©lectionnÃ©e !`);
        }
    }

    // SÃ©lection du mode
    function selectMode(mode) {
        gameMode = mode;
        document.querySelectorAll('.mode-card').forEach(card => {
            card.classList.remove('active');
        });
        event.target.closest('.mode-card').classList.add('active');
    }

    // DÃ©marrer le jeu avec le mode sÃ©lectionnÃ©
    function startGameWithMode() {
        if (selectedCategories.length === 0) {
            alert('Veuillez sÃ©lectionner au moins une catÃ©gorie !');
            return;
        }
        
        // VÃ©rifier qu'il y a au moins un produit disponible
        let totalAvailable = 0;
        selectedCategories.forEach(cat => {
            totalAvailable += getAvailableProductsCount(cat);
        });
        
        if (totalAvailable === 0) {
            alert('âš ï¸ Aucun produit disponible dans les catÃ©gories sÃ©lectionnÃ©es Ã  votre niveau actuel !');
            return;
        }
        
        document.getElementById('startScreen').style.display = 'none';
        document.getElementById('gameArea').style.display = 'block';
        
        const badge = document.getElementById('modeBadge');
        if (gameMode === 'normal') {
            badge.textContent = 'ðŸŸ¢ MODE NORMAL';
            badge.className = 'mode-badge normal';
        } else {
            badge.textContent = 'ðŸ”´ MODE EXPERT';
            badge.className = 'mode-badge expert';
        }
        
        startGame();
    }

    // Retour au menu
    function backToMenu() {
        document.getElementById('startScreen').style.display = 'block';
        document.getElementById('gameArea').style.display = 'none';
        document.getElementById('timer').classList.remove('warning');
        if (timerInterval) {
            clearInterval(timerInterval);
        }
    }

    // DÃ©marrer une partie
    function startGame() {
        // Collecter tous les produits disponibles de toutes les catÃ©gories sÃ©lectionnÃ©es
        let allAvailableProducts = [];
        
        selectedCategories.forEach(categoryName => {
            const categoryProducts = productsByCategory[categoryName];
            const availableInCategory = categoryProducts.filter(p => p.requiredLevel <= playerData.level);
            allAvailableProducts = allAvailableProducts.concat(availableInCategory);
        });
        
        if (allAvailableProducts.length === 0) {
            alert('âš ï¸ Aucun produit disponible !');
            backToMenu();
            return;
        }
        
        // SÃ©lectionner un produit alÃ©atoire parmi tous les produits disponibles
        currentProduct = allAvailableProducts[Math.floor(Math.random() * allAvailableProducts.length)];
        
        timeLeft = gameMode === 'expert' ? 30 : 60;
        attempts = 0;
        gameActive = true;
        
        document.getElementById('productImage').src = currentProduct.image;
        document.getElementById('productName').textContent = currentProduct.name;
        document.getElementById('productLink').href = currentProduct.link;
        document.getElementById('priceInput').value = '';
        document.getElementById('priceInput').disabled = false;
        document.getElementById('submitBtn').disabled = false;
        document.getElementById('feedback').classList.remove('show');
        document.getElementById('gameOver').classList.remove('show');
        document.getElementById('attempts').textContent = 'Tentatives: 0';
        document.getElementById('realPrice').textContent = '';
        document.getElementById('rewardDisplay').textContent = '';
        
        if (gameMode === 'expert') {
            document.getElementById('priceInput').placeholder = 'Prix exact avec centimes (ex: 299.99)';
            document.getElementById('priceInput').step = '0.01';
        } else {
            document.getElementById('priceInput').placeholder = 'Entrez votre prix en â‚¬ (arrondi)';
            document.getElementById('priceInput').step = '1';
        }
        
        startTimer();
    }

    function startTimer() {
        updateTimerDisplay();
        timerInterval = setInterval(() => {
            timeLeft--;
            updateTimerDisplay();
            if (timeLeft <= 10) {
                document.getElementById('timer').classList.add('warning');
            }
            if (timeLeft <= 0) {
                endGame(false);
            }
        }, 1000);
    }

    function updateTimerDisplay() {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        document.getElementById('timer').textContent =
            `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    function submitGuess() {
        if (!gameActive) return;
        const guess = parseFloat(document.getElementById('priceInput').value);

        if (isNaN(guess) || guess <= 0) {
            showFeedback('Veuillez entrer un prix valide !', 'higher');
            return;
        }

        attempts++;
        document.getElementById('attempts').textContent = `Tentatives: ${attempts}`;

        let targetPrice = currentProduct.price;
        let isCorrect = false;

        if (gameMode === 'expert') {
            isCorrect = guess === targetPrice;
        } else {
            targetPrice = Math.round(targetPrice);
            const guessRounded = Math.round(guess);
            isCorrect = guessRounded === targetPrice;
        }

        if (isCorrect) {
            endGame(true);
        } else if (gameMode === 'expert') {
            if (guess > targetPrice) {
                showFeedback('C\'est MOINS ! ðŸ“‰', 'lower');
            } else {
                showFeedback('C\'est PLUS ! ðŸ“ˆ', 'higher');
            }
        } else {
            if (Math.round(guess) > targetPrice) {
                showFeedback('C\'est MOINS ! ðŸ“‰', 'lower');
            } else {
                showFeedback('C\'est PLUS ! ðŸ“ˆ', 'higher');
            }
        }

        document.getElementById('priceInput').value = '';
        document.getElementById('priceInput').focus();
    }

    function showFeedback(message, type) {
        const feedback = document.getElementById('feedback');
        feedback.textContent = message;
        feedback.className = 'feedback show ' + type;
    }

    function endGame(won) {
        gameActive = false;
        clearInterval(timerInterval);
        document.getElementById('priceInput').disabled = true;
        document.getElementById('submitBtn').disabled = true;
        document.getElementById('timer').classList.remove('warning');

        const displayPrice = gameMode === 'expert' 
            ? currentProduct.price.toFixed(2) + 'â‚¬'
            : Math.round(currentProduct.price) + 'â‚¬';

        if (won) {
            // Calculer les rÃ©compenses
            let moneyReward = gameMode === 'expert' ? 1500 : 500;
            let xpReward = gameMode === 'expert' ? 20 : 10;
            
            // Bonus selon le nombre de tentatives
            if (attempts === 1) {
                moneyReward *= 2;
                xpReward *= 2;
            } else if (attempts <= 3) {
                moneyReward *= 1.5;
                xpReward *= 1.5;
            }
            
            moneyReward = Math.floor(moneyReward);
            xpReward = Math.floor(xpReward);
            
            playerData.money += moneyReward;
            playerData.xp += xpReward;
            playerData.wins++;
            
            // Calcul du niveau (1000 XP par niveau)
            const newLevel = Math.floor(playerData.xp / 1000) + 1;
            if (newLevel > playerData.level) {
                const oldLevel = playerData.level;
                playerData.level = newLevel;
                setTimeout(() => {
                    alert(`ðŸŽŠ NIVEAU SUPÃ‰RIEUR ! Vous passez du niveau ${oldLevel} au niveau ${playerData.level} !\n\nâœ¨ De nouveaux produits sont maintenant disponibles dans vos catÃ©gories !`);
                }, 500);
            }
            
            updatePlayerStats();
            renderCategories();
            
            showFeedback(`ðŸŽ‰ BRAVO ! Le prix Ã©tait ${displayPrice} ! TrouvÃ© en ${attempts} tentative(s) !`, 'win');
            document.getElementById('rewardDisplay').textContent = `ðŸ’° +${moneyReward}â‚¬ | â­ +${xpReward} XP`;
        } else {
            document.getElementById('realPrice').textContent = `Le prix exact Ã©tait : ${displayPrice}`;
            showFeedback(`â±ï¸ Temps Ã©coulÃ© !`, 'lose');
        }

        document.getElementById('gameOver').classList.add('show');
    }

    function newGame() {
        startGame();
    }

    document.getElementById('priceInput').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            submitGuess();
        }
    });
</script>
```

</body>
</html>philips-hue.com/fr-fr"
                },
                {
                    name: "Ring Video Doorbell Pro 2",
                    price: 249.99,
                    image: "https://images.unsplash.com/photo-1558002038-1055907df827?w=400&h=400&fit=crop",
                    link: "https://fr-fr.ring.com/products/video-doorbell-pro-2"
                },
                {
                    name: "Dyson V15 Detect Aspirateur",
                    price: 749.00,
                    image: "https://images.unsplash.com/photo-1558317374-067fb5f30001?w=400&h=400&fit=crop",
                    link: "https://www.dyson.fr/aspirateurs/sans-fil/v15-detect"
                }
            ],
            'Premium': [
                {
                    name: "MacBook Pro 16\" M3 Max 1 To",
                    price: 3999.00,
                    image: "https://images.unsplash.com/photo-1484788984921-03950022c9ef?w=400&h=400&fit=crop",
                    link: "https://www.apple.com/fr/macbook-pro-14-and-16/"
                },
                {
                    name: "Samsung OLED 55\" S90C",
                    price: 1799.00,
                    image: "https://images.unsplash.com/photo-1593359677879-a4bb92f829d1?w=400&h=400&fit=crop",
                    link: "https://www.samsung.com/fr/tvs/oled-tv/"
                },
                {
                    name: "LG OLED evo 65\" C3",
                    price: 2299.00,
                    image: "https://images.unsplash.com/photo-1593784991095-a205069470b6?w=400&h=400&fit=crop",
                    link: "https://www.lg.com/fr/televiseurs/oled-tv"
                },
                {
                    name: "DJI Mavic 3 Pro",
                    price: 2199.00,
                    image: "https://images.unsplash.com/photo-1473968512647-3e447244af8f?w=400&h=400&fit=crop",
                    link: "https://www.dji.com/fr/mavic-3-pro"
                },
                {
                    name: "iRobot Roomba j7+",
                    price: 799.00,
                    image: "https://images.unsplash.com/photo-1625048082589-298a0c962e6f?w=400&h=400&fit=crop",
                    link: "https://www.irobot.fr/roomba/j-series"
                },
                {
                    name: "Rimowa Essential Cabin S",
                    price: 650.00,
                    image: "https://images.unsplash.com/photo-1581553680321-4fffae59fccd?w=400&h=400&fit=crop",
                    link: "https://www.rimowa.com/fr/fr/essential/cabin-s/"
                }
            ]
        };

```
    let currentProduct;
    let timeLeft = 60;
    let timerInterval;
    let gameActive = false;
    let attempts = 0;
    let gameMode = 'normal';
    let selectedCategory = 'Ã‰lectronique de base';

    // Initialiser l'affichage
    updatePlayerStats();
    renderCategories();

    // Mise Ã  jour des stats du joueur
    function updatePlayerStats() {
        document.getElementById('playerLevel').textContent = playerData.level;
        document.getElementById('playerMoney').textContent = playerData.money + 'â‚¬';
        document.getElementById('playerWins').textContent = playerData.wins;
        savePlayerData();
    }

    // Sauvegarder les donnÃ©es
    function savePlayerData() {
        localStorage.setItem('playerData', JSON.stringify(playerData));
    }

    // Afficher les catÃ©gories
    function renderCategories() {
        const grid = document.getElementById('categoriesGrid');
        grid.innerHTML = '';
        
        categories.forEach(cat => {
            const isUnlocked = playerData.unlockedCategories.includes(cat.name);
            const canUnlock = playerData.level >= cat.unlockLevel && playerData.money >= cat.unlockCost;
            
            const card = document.createElement('div');
            card.className = `category-card ${isUnlocked ? (selectedCategory === cat.name ? 'active' : '') : 'locked'}`;
            
            if (isUnlocked) {
                card.onclick = () => selectCategory(cat.name);
            }
            
            card.innerHTML = `
                <div class="category-icon">${cat.icon}</div>
                <div class="category-name">${cat.name}</div>
                ${!isUnlocked ? `
                    <div class="lock-icon">ðŸ”’</div>
                    <div class="category-unlock">
                        Niveau ${cat.unlockLevel}<br>
                        ${cat.unlockCost}â‚¬
                    </div>
                    ${canUnlock ? `<button class="unlock-btn" onclick="unlockCategory('${cat.name}', ${cat.unlockCost}); event.stopPropagation();">DÃ©bloquer</button>` : `<button class="unlock-btn" disabled>DÃ©bloquer</button>`}
                ` : ''}
            `;
            
            grid.appendChild(card);
        });
    }

    // SÃ©lectionner une catÃ©gorie
    function selectCategory(categoryName) {
        selectedCategory = categoryName;
        renderCategories();
        document.getElementById('startGameBtn').disabled = false;
    }

    // DÃ©bloquer une catÃ©gorie
    function unlockCategory(categoryName, cost) {
        if (playerData.money >= cost) {
            playerData.money -= cost;
            playerData.unlockedCategories.push(categoryName);
            selectedCategory = categoryName;
            updatePlayerStats();
            renderCategories();
            alert(`ðŸŽ‰ CatÃ©gorie "${categoryName}" dÃ©bloquÃ©e !`);
        }
    }

    // SÃ©lection du mode
    function selectMode(mode) {
        gameMode = mode;
        document.querySelectorAll('.mode-card').forEach(card => {
            card.classList.remove('active');
        });
        event.target.closest('.mode-card').classList.add('active');
    }

    // DÃ©marrer le jeu avec le mode sÃ©lectionnÃ©
    function startGameWithMode() {
        if (!selectedCategory) {
            alert('Veuillez sÃ©lectionner une catÃ©gorie !');
            return;
        }
        
        document.getElementById('startScreen').style.display = 'none';
        document.getElementById('gameArea').style.display = 'block';
        
        const badge = document.getElementById('modeBadge');
        if (gameMode === 'normal') {
            badge.textContent = 'ðŸŸ¢ MODE NORMAL';
            badge.className = 'mode-badge normal';
        } else {
            badge.textContent = 'ðŸ”´ MODE EXPERT';
            badge.className = 'mode-badge expert';
        }
        
        startGame();
    }

    // Retour au menu
    function backToMenu() {
        document.getElementById('startScreen').style.display = 'block';
        document.getElementById('gameArea').style.display = 'none';
        document.getElementById('timer').classList.remove('warning');
        if (timerInterval) {
            clearInterval(timerInterval);
        }
    }

    // DÃ©marrer une partie
    function startGame() {
        const categoryProducts = productsByCategory[selectedCategory];
        currentProduct = categoryProducts[Math.floor(Math.random() * categoryProducts.length)];
        
        timeLeft = gameMode === 'expert' ? 30 : 60;
        attempts = 0;
        gameActive = true;
        
        document.getElementById('productImage').src = currentProduct.image;
        document.getElementById('productName').textContent = currentProduct.name;
        document.getElementById('productLink').href = currentProduct.link;
        document.getElementById('priceInput').value = '';
        document.getElementById('priceInput').disabled = false;
        document.getElementById('submitBtn').disabled = false;
        document.getElementById('feedback').classList.remove('show');
        document.getElementById('gameOver').classList.remove('show');
        document.getElementById('attempts').textContent = 'Tentatives: 0';
        document.getElementById('realPrice').textContent = '';
        document.getElementById('rewardDisplay').textContent = '';
        
        if (gameMode === 'expert') {
            document.getElementById('priceInput').placeholder = 'Prix exact avec centimes (ex: 299.99)';
            document.getElementById('priceInput').step = '0.01';
        } else {
            document.getElementById('priceInput').placeholder = 'Entrez votre prix en â‚¬ (arrondi)';
            document.getElementById('priceInput').step = '1';
        }
        
        startTimer();
    }

    function startTimer() {
        updateTimerDisplay();
        timerInterval = setInterval(() => {
            timeLeft--;
            updateTimerDisplay();
            if (timeLeft <= 10) {
                document.getElementById('timer').classList.add('warning');
            }
            if (timeLeft <= 0) {
                endGame(false);
            }
        }, 1000);
    }

    function updateTimerDisplay() {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        document.getElementById('timer').textContent =
            `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }

    function submitGuess() {
        if (!gameActive) return;
        const guess = parseFloat(document.getElementById('priceInput').value);

        if (isNaN(guess) || guess <= 0) {
            showFeedback('Veuillez entrer un prix valide !', 'higher');
            return;
        }

        attempts++;
        document.getElementById('attempts').textContent = `Tentatives: ${attempts}`;

        let targetPrice = currentProduct.price;
        let isCorrect = false;

        if (gameMode === 'expert') {
            isCorrect = guess === targetPrice;
        } else {
            targetPrice = Math.round(targetPrice);
            const guessRounded = Math.round(guess);
            isCorrect = guessRounded === targetPrice;
        }

        if (isCorrect) {
            endGame(true);
        } else if (gameMode === 'expert') {
            if (guess > targetPrice) {
                showFeedback('C\'est MOINS ! ðŸ“‰', 'lower');
            } else {
                showFeedback('C\'est PLUS ! ðŸ“ˆ', 'higher');
            }
        } else {
            if (Math.round(guess) > targetPrice) {
                showFeedback('C\'est MOINS ! ðŸ“‰', 'lower');
            } else {
                showFeedback('C\'est PLUS ! ðŸ“ˆ', 'higher');
            }
        }

        document.getElementById('priceInput').value = '';
        document.getElementById('priceInput').focus();
    }

    function showFeedback(message, type) {
        const feedback = document.getElementById('feedback');
        feedback.textContent = message;
        feedback.className = 'feedback show ' + type;
    }

    function endGame(won) {
        gameActive = false;
        clearInterval(timerInterval);
        document.getElementById('priceInput').disabled = true;
        document.getElementById('submitBtn').disabled = true;
        document.getElementById('timer').classList.remove('warning');

        const displayPrice = gameMode === 'expert' 
            ? currentProduct.price.toFixed(2) + 'â‚¬'
            : Math.round(currentProduct.price) + 'â‚¬';

        if (won) {
            // Calculer les rÃ©compenses
            let moneyReward = gameMode === 'expert' ? 1500 : 500;
            let xpReward = gameMode === 'expert' ? 200 : 100;
            
            // Bonus selon le nombre de tentatives
            if (attempts === 1) {
                moneyReward *= 2;
                xpReward *= 2;
            } else if (attempts <= 3) {
                moneyReward *= 1.5;
                xpReward *= 1.5;
            }
            
            moneyReward = Math.floor(moneyReward);
            xpReward = Math.floor(xpReward);
            
            playerData.money += moneyReward;
            playerData.xp += xpReward;
            playerData.wins++;
            
            // Calcul du niveau (100 XP par niveau)
            const newLevel = Math.floor(playerData.xp / 100) + 1;
            if (newLevel > playerData.level) {
                playerData.level = newLevel;
                setTimeout(() => {
                    alert(`ðŸŽŠ NIVEAU SUPÃ‰RIEUR ! Vous Ãªtes maintenant niveau ${playerData.level} !`);
                }, 500);
            }
            
            updatePlayerStats();
            
            showFeedback(`ðŸŽ‰ BRAVO ! Le prix Ã©tait ${displayPrice} ! TrouvÃ© en ${attempts} tentative(s) !`, 'win');
            document.getElementById('rewardDisplay').textContent = `ðŸ’° +${moneyReward}â‚¬ | â­ +${xpReward} XP`;
        } else {
            document.getElementById('realPrice').textContent = `Le prix exact Ã©tait : ${displayPrice}`;
            showFeedback(`â±ï¸ Temps Ã©coulÃ© !`, 'lose');
        }

        document.getElementById('gameOver').classList.add('show');
    }

    function newGame() {
        startGame();
    }

    document.getElementById('priceInput').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            submitGuess();
        }
    });
</script>
```

</body>
</html>